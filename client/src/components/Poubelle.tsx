// // // {/* <div  className='mt-4 grid gap-2 md:grid-cols-3'>
// // //                     <div className='rounded-md border'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>


// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>


// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>


// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>


// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>


// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>

// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>

// // //                     <div className='border rounded-md'>
// // //                         <div className='px-4 py-2'>
// // //                             <h1 className='text-xl'>Frais</h1>
// // //                         </div>
// // //                         <hr />

// // //                         <div className='px-4 py-2'>
// // //                             <div className='py-2'>
// // //                                 <h1 className='text-2xl md:text-3xl'>Frais de Stage</h1>
// // //                             </div>

// // //                             <p>
// // //                                 Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorum sunt doloribus 
// // //                             </p>

// // //                             <div className='mt-4 flex justify-end'>
// // //                                 <button 
// // //                                     type="button"
// // //                                     className='border px-7 py-2 rounded-lg text-white bg-green-700'
// // //                                 >
// // //                                     Payer
// // //                                 </button>
// // //                             </div>
// // //                         </div>
// // //                     </div>
// // //                 </div> */}


// // //                 const Initialepayement = async (frais) => {
// // //                     console.log("Données frais :", frais);
// // //                     try {
// // //                         const storedUser = localStorage.getItem("user");
// // //                         const user = storedUser ? JSON.parse(storedUser) : null;
            
// // //                         if (!user) {
// // //                             console.error("Les informations de l'utilisateur ne sont pas disponibles.");
// // //                             return;
// // //                         }
            
// // //                         const reponse = await fetch("http://localhost:3000/api/v3/datacinetpay/cinetpay", {
// // //                             method: "POST",
// // //                             headers: {
// // //                                 "Content-Type": "application/json",
// // //                             },
// // //                             body: JSON.stringify({
// // //                                 transaction_id: new Date().getTime().toString(),
// // //                                 amount: frais.montant,
// // //                                 currency: "XOF",
// // //                                 description: frais.titre,
// // //                                 user: {
// // //                                     id: user.id,
// // //                                     name: user.nom,
// // //                                     surname: user.postnom,
// // //                                     phone: user.numerotel,
// // //                                     city: user.city || "Ville utilisateur",
// // //                                     country: "CD",
// // //                                 },
// // //                                 frais_id: frais.id,
// // //                             }),
// // //                         });
            
// // //                         const paymentData = await reponse.json();
            
// // //                         if (!paymentData.apikey || !paymentData.site_id || !paymentData.notify_url) {
// // //                             console.error("Données de paiement manquantes ou invalides :", paymentData);
// // //                             return;
// // //                         }
            
// // //                         CinetPay.setConfig({
// // //                             apikey: paymentData.apikey,
// // //                             site_id: paymentData.site_id,
// // //                             notify_url: paymentData.notify_url,
// // //                         });
            
// // //                         CinetPay.getCheckout(paymentData, {
// // //                             onSuccess: (reponse) => {
// // //                                 console.log("Paiement réussi :", reponse);
// // //                             },
// // //                             onError: (error) => {
// // //                                 console.error("Erreur lors du paiement :", error);
// // //                             },
// // //                         });
// // //                     } catch (error) {
// // //                         console.error("Erreur API :", error);
// // //                     }
// // //                 };



// // // cinte pay


// // const confirmerPaiement = async (frais) => {
// //     const storedUser = localStorage.getItem("user");
// //     const user = storedUser ? JSON.parse(storedUser) : null;

// //     if (!user) {
// //         console.error("Utilisateur non connecté");
// //         return;
// //     }

// //     try {
// //         const response = await fetch("http://localhost:3000/api/v3/datacinetpay/cinetpay", {
// //             method: "POST",
// //             headers: { "Content-Type": "application/json" },
// //             body: JSON.stringify({
// //                 step: "initialize",
// //                 transaction_id: new Date().getTime().toString(),
// //                 amount: frais.montant,
// //                 currency: "XOF",
// //                 description: frais.titre,
// //                 user,
// //                 frais_id: frais.id,
// //             }),
// //         });

// //         const data = await response.json();
// //         if (data.payment_url) {
// //             // Ouvre le guichet de paiement
// //             window.location.href = data.payment_url;
// //         } else {
// //             console.error("Erreur :", data.message);
// //         }
// //     } catch (error) {
// //         console.error("Erreur API :", error);
// //     }
// // };













// // CODE COMPLET CINET PLAY

// type ModalProps = {
//     isOpen: boolean;
//     onclose: () => void;
//     frais: {id: number, titre: string, montant: string} | null;
// }

// function Modal({ isOpen, onclose, frais }: ModalProps) {
//     if (!isOpen) return null;

//     const Cinetpay = (frais) => {
//         if (!frais) {
//             console.error("Frais non défini");
//             alert("Données de paiement manquantes !");
//             return;
//         }
        
//         const getUser = localStorage.getItem("user");
//         const user = getUser ? JSON.parse(getUser) : null;
//         console.log(user);

//         if (!user || !user.nom || !user.postnom || !user.numerotel) {
//             console.error("Informations utilisateur incomplètes");
//             alert("Veuillez vérifier vos informations personnelles !");
//             return;
//         }

//         CinetPay.setConfig({
//             apikey: import.meta.env.VITE_CINETPAY_API_KEY,
//             site_id: import.meta.env.VITE_CINETPAY_SITE_ID,
//             notify_url: 'https://mondomaine.com/notify/',
//             close_after_response: true,
//             mode: 'PRODUCTION',
//         });

//         CinetPay.getCheckout({
//             transaction_id: Math.floor(Math.random() * 100000000).toString(),
//             amount: frais.montant,
//             currency: 'CDF',
//             channels: 'ALL',
//             description: frais.titre,
//             //Fournir ces variables obligatoirement pour le paiements par carte bancaire
//             customer_name: user.nom,//Le nom du client
//             customer_surname: user.postnom,//Le prenom du client
//             customer_email: "down@test.com",//l'email du client
//             customer_phone_number: user.numerotel,//l'email du client
//             customer_address : "BP 0024",//addresse du client
//             customer_city: "Antananarivo",// La ville du client
//             customer_country : "CD",// le code ISO du pays
//             customer_state : "CD",// le code ISO l'état
//             customer_zip_code : "06510", // code postal
//         });

//         CinetPay.waitResponse(function(data) {
//             // En cas d'échec
//             if (data.status == "REFUSED") {
//                 if (alert("Votre paiement a échoué")) {
//                     window.location.reload();
//                 }
//             }
//             // En cas de succès
//             else if (data.status == "ACCEPTED") {
//                 if (alert("Votre paiement a été effectué avec succès")) {
//                     // correct, on delivre le service
//                     window.location.reload();
//                 }
//             }
//         });
//         CinetPay.onError(function(data) {
//             console.log(data);
//         });

//     };

//     return (
//         <div className="absolute inset-0 bg-black bg-opacity-80">
//             <div className="flex justify-center items-center h-full">
//                 <div className="py-2 duration-200 font-Roboto ease-in-out transition-all bg-white rounded-lg w-11/12 md:w-7/12 lg:w-4/12">
//                     <div className="flex justify-between items-center py-3 px-4 border-b">
//                         <h1 className="font-bold text-gray-800">Paiement</h1>
//                         <button
//                             type="button"
//                             onClick={onclose}
//                             className="size-8 inline-flex justify-center items-center gap-x-2 rounded-full border border-transparent bg-gray-100 text-gray-800 hover:bg-gray-200 focus:outline-none focus:bg-gray-200 disabled:opacity-50 disabled:pointer-events-none "
//                             aria-label="Close"
//                         >
//                             <svg className="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
//                                 <path d="M18 6 6 18"></path>
//                                 <path d="m6 6 12 12"></path>
//                             </svg>
//                         </button>
//                     </div>
//                     <div className="p-4 overflow-y-auto">
//                         <h1 className="text-lg pb-2">Paiement pour : <span className="ml-2 font-semibold">{frais?.titre || "Non spécifié"}</span></h1>
//                         <h1 className="text-lg">Montant à Payer : <span className="ml-2 font-semibold">{frais?.montant || "0"} FC</span></h1>
//                     </div>
//                     <div className="flex justify-end items-center gap-x-2 pt-2 px-4 border-t">
//                         <button
//                             type="button"
//                             onClick={onclose}
//                             className="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none "
//                         >
//                             Close
//                         </button>
//                         <button
//                             type="button"
//                             disabled={!frais}
//                             onClick={()=> Cinetpay(frais)}
//                             className="py-2 px-5 inline-flex items-center gap-x-2 text-base font-medium rounded-lg border-transparent bg-green-500 text-white hover:bg-green-700 focus:outline-none focus:bg-green-700 disabled:opacity-50 disabled:pointer-events-none"
//                         >
//                             payer
//                         </button>
//                     </div>
//                 </div>
//             </div>
//         </div>
//     );
// }

// export default Modal;
